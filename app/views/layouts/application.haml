!!! 5
%html{:lang => "en"}
  %head
    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    /[if lt IE 9]
      = javascript_include_tag 'http://html5shim.googlecode.com/svn/trunk/html5.js'
    %link{:rel => "apple-touch-icon", :href => "/images/apple-touch-icon.png"}
    %meta{:name => "viewport", :content => "width=device-width, initial-scale=1"}/
    %meta{:content => 'text/html; charset=utf-8', 'http-equiv' => 'Content-Type'}
    %title= @title
    =javascript_include_tag 'jquery-1.8.2.min'
    =stylesheet_link_tag 'main', 'github'
    =stylesheet_link_tag 'bootstrap/bootstrap.min', 'bootstrap/bootstrap-responsive.min', 'font-awesome/font-awesome.min'

    :javascript
      function imgFallback(object, i_class, i_style) {
        new_i = document.createElement('i');
        new_i.className = i_class;
        new_i.style.cssText = i_style;
        object.parentNode.replaceChild(new_i, object);
      }
    =javascript_include_tag 'highlight.pack'
    %script hljs.initHighlightingOnLoad();

  %body
    %header
      .navbar.navbar-fixed-top
        .navbar-inner
          .container
            %a.brand{:href => "/", :style => 'margin-right: 20px;'} Ladder
            %a.btn.btn-navbar{"data-target" => ".nav-collapse", "data-toggle" => "collapse"}
              %span.icon-bar
              %span.icon-bar
              %span.icon-bar
              %span.icon-bar
            .nav-collapse
              - unless request.path_info == '/'
                - form_tag '/search', :method => 'get', :class => 'navbar-search' do
                  = text_field_tag :q, :class => 'input-xxlarge search-query', :placeholder => 'Search', :value => @querystring
              %ul.nav.pull-right

                %li{:class => request.path_info == '/about' ? 'active' : ''}
                  = link_to I18n.t('about'), url_for(:about)
                %li
                  = link_to I18n.t('contact'), url_for('http://deliberatedata.com')

                %li.dropdown
                  %a.dropdown-toggle{:href => "#", :'data-toggle' => 'dropdown'}
                    = I18n.t('language')
                    %b.caret
                  %ul.dropdown-menu
                    %li{:class => 'en' == I18n.locale.to_s ? 'active' : ''}
                      = link_to I18n.t('en'), current_path('locale' => 'en') rescue nil
                    %li{:class => 'fr' == I18n.locale.to_s ? 'active' : ''}
                      = link_to I18n.t('fr'), current_path('locale' => 'fr') rescue nil

                %li.divider-vertical

                - if logged_in?
                  %li.dropdown
                    %a#user-menu.dropdown-toggle{:href => "#", :data =>{:toggle => 'dropdown'}}
                      =tag_icon :user
                      %b.caret
                    %ul.dropdown-menu
                      %li= link_to tag_icon(:edit, 'Profile'), Admin.url(:accounts, :edit, :id => current_account.id), :class => "Edit", :id => "user-profile"
                      %li.dropdown-form= button_to('Logout', Admin.url(:sessions, :destroy), :method => :delete) { link_to tag_icon(:off, 'Logout'),'#', :id => 'user-logout', :class => 'to_submit' }
                - else
                  %li= link_to 'Login', Admin.url(:sessions, :new)

                %li.divider-vertical

    #main.container= yield

    %footer
      .container
        .row
          .span3.offset6
            .pull-right &copy; #{Time.now.year} Deliberate Data

    =javascript_include_tag 'bootstrap/bootstrap.min'